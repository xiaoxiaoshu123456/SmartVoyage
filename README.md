[Uploading README.mdâ€¦]()
# SmartVoyage - åŸºäº A2A çš„æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹ç³»ç»Ÿ

## é¡¹ç›®æ¦‚è¿°

SmartVoyage æ˜¯ä¸€ä¸ªåŸºäº Agent2Agent (A2A) æ¶æ„çš„æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹ç³»ç»Ÿï¼Œé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œé€šè¿‡å¤šä¸ªä¸“ä¸šä»£ç†ååŒå·¥ä½œï¼Œä¸ºç”¨æˆ·æä¾›å…¨é¢çš„æ—…è¡Œç›¸å…³æœåŠ¡ã€‚

### æ ¸å¿ƒç‰¹æ€§
- **å¤šä»£ç†ååŒ**: ä½¿ç”¨ A2A æ¶æ„å®ç°ä»£ç†é—´çš„é€šä¿¡ä¸åä½œ
- **æ„å›¾è¯†åˆ«**: æ™ºèƒ½è¯†åˆ«ç”¨æˆ·æŸ¥è¯¢æ„å›¾å¹¶è·¯ç”±åˆ°ç›¸åº”ä»£ç†
- **å¤šæ¨¡æ€æœåŠ¡**: æ”¯æŒå¤©æ°”æŸ¥è¯¢ã€ç¥¨åŠ¡æŸ¥è¯¢ã€ç¥¨åŠ¡é¢„è®¢ã€æ™¯ç‚¹æ¨èç­‰åŠŸèƒ½
- **åŒç•Œé¢æ”¯æŒ**: æä¾› Streamlit Web ç•Œé¢å’Œå‘½ä»¤è¡Œç•Œé¢
- **æ¨¡å—åŒ–è®¾è®¡**: æ˜“äºæ‰©å±•å’Œç»´æŠ¤

## ç³»ç»Ÿæ¶æ„

```
SmartVoyage/
â”œâ”€â”€ app.py                    # Streamlit Web ç•Œé¢ä¸»ç¨‹åº
â”œâ”€â”€ main.py                   # å‘½ä»¤è¡Œç•Œé¢ä¸»ç¨‹åº
â”œâ”€â”€ config.py                 # é…ç½®æ–‡ä»¶
â”œâ”€â”€ create_logger.py          # æ—¥å¿—é…ç½®
â”œâ”€â”€ main_prompts.py           # æç¤ºè¯æ¨¡æ¿
â”œâ”€â”€ requirements.txt          # Python ä¾èµ–
â”œâ”€â”€ a2a_server/              # A2A ä»£ç†æœåŠ¡å™¨
â”‚   â”œâ”€â”€ weather_server.py    # å¤©æ°”æŸ¥è¯¢ä»£ç†
â”‚   â”œâ”€â”€ ticket_server.py     # ç¥¨åŠ¡æŸ¥è¯¢ä»£ç†
â”‚   â””â”€â”€ order_server.py      # ç¥¨åŠ¡é¢„è®¢ä»£ç†
â”œâ”€â”€ mcp_server/              # MCP æœåŠ¡å™¨
â”‚   â”œâ”€â”€ mcp_weather_server.py
â”‚   â”œâ”€â”€ mcp_ticket_server.py
â”‚   â””â”€â”€ mcp_order_server.py
â”œâ”€â”€ sql/                     # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ create_table.sql
â”‚   â””â”€â”€ insert_data.sql
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”œâ”€â”€ logs/                    # æ—¥å¿—ç›®å½•
â””â”€â”€ test/                    # æµ‹è¯•æ–‡ä»¶
```

## åŠŸèƒ½æ¨¡å—

### 1. æ„å›¾è¯†åˆ«æ¨¡å—
- **ä½ç½®**: `app.py:85-106`, `main.py:56-85`
- **åŠŸèƒ½**: ä½¿ç”¨ LLM åˆ†æç”¨æˆ·è¾“å…¥ï¼Œè¯†åˆ«æ„å›¾å¹¶æ”¹å†™æŸ¥è¯¢
- **æ”¯æŒçš„æ„å›¾**:
  - `weather`: å¤©æ°”æŸ¥è¯¢
  - `flight`: æœºç¥¨æŸ¥è¯¢
  - `train`: é«˜é“/ç«è½¦ç¥¨æŸ¥è¯¢
  - `concert`: æ¼”å”±ä¼šç¥¨æŸ¥è¯¢
  - `order`: ç¥¨åŠ¡é¢„è®¢
  - `attraction`: æ™¯ç‚¹æ¨è
  - `out_of_scope`: è¶…å‡ºèŒƒå›´ï¼ˆç›´æ¥ç”± LLM å›å¤ï¼‰

### 2. ä»£ç†ç½‘ç»œæ¨¡å—
- **æ ¸å¿ƒç»„ä»¶**: `AgentNetwork` (python-a2a åº“)
- **ä»£ç†åˆ—è¡¨**:
  - `WeatherQueryAssistant`: http://localhost:5005
  - `TicketQueryAssistant`: http://localhost:5006
  - `TicketOrderAssistant`: http://localhost:5007

### 3. ç”¨æˆ·ç•Œé¢
#### Web ç•Œé¢ (Streamlit)
- **æ–‡ä»¶**: `app.py`
- **ç‰¹æ€§**:
  - å®æ—¶èŠå¤©ç•Œé¢
  - Agent Card æ˜¾ç¤ºä»£ç†ä¿¡æ¯
  - å“åº”å¼å¸ƒå±€è®¾è®¡
  - ç¾è§‚çš„ CSS æ ·å¼

#### å‘½ä»¤è¡Œç•Œé¢
- **æ–‡ä»¶**: `main.py`
- **ç‰¹æ€§**:
  - äº¤äº’å¼å‘½ä»¤è¡Œ
  - æ”¯æŒæŸ¥çœ‹ä»£ç†å¡ç‰‡ (`cards` å‘½ä»¤)
  - é€€å‡ºå‘½ä»¤ (`quit`)

### 4. ä»£ç†æœåŠ¡å™¨
#### å¤©æ°”æŸ¥è¯¢ä»£ç†
- **æ–‡ä»¶**: `a2a_server/weather_server.py`
- **ç«¯å£**: 5005
- **åŠŸèƒ½**: æŸ¥è¯¢å¤©æ°”ä¿¡æ¯

#### ç¥¨åŠ¡æŸ¥è¯¢ä»£ç†
- **æ–‡ä»¶**: `a2a_server/ticket_server.py`
- **ç«¯å£**: 5006
- **åŠŸèƒ½**: æŸ¥è¯¢æœºç¥¨ã€ç«è½¦ç¥¨ã€æ¼”å”±ä¼šç¥¨

#### ç¥¨åŠ¡é¢„è®¢ä»£ç†
- **æ–‡ä»¶**: `a2a_server/order_server.py`
- **ç«¯å£**: 5007
- **åŠŸèƒ½**: å¤„ç†ç¥¨åŠ¡é¢„è®¢

### 5. MCP æœåŠ¡å™¨
- **ç›®å½•**: `mcp_server/`
- **åŠŸèƒ½**: æä¾› Model Context Protocol æ¥å£
- **åŒ…å«**: å¤©æ°”ã€ç¥¨åŠ¡ã€è®¢å• MCP æœåŠ¡å™¨

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒä¾èµ–
- **æ¡†æ¶**: FastAPI, Streamlit, LangChain
- **AI/ML**: OpenAI API, DashScope (é˜¿é‡Œäº‘é€šä¹‰åƒé—®)
- **ä»£ç†æ¡†æ¶**: python-a2a (Agent2Agent)
- **æ•°æ®åº“**: MySQL (é€šè¿‡ mysql-connector-python)
- **Web æœåŠ¡å™¨**: Uvicorn

### ä¸»è¦ Python åŒ…
- `python-a2a==0.5.4`: A2A ä»£ç†æ¡†æ¶
- `langchain==0.3.26`: LLM åº”ç”¨æ¡†æ¶
- `streamlit==1.47.1`: Web åº”ç”¨æ¡†æ¶
- `fastapi==0.116.1`: API æ¡†æ¶
- `dashscope==1.24.0`: é˜¿é‡Œäº‘é€šä¹‰åƒé—® SDK
- `mysql-connector-python==9.4.0`: MySQL è¿æ¥å™¨

## é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ (`config.py`)
```python
class Config:
    def __init__(self):
        # å¤§æ¨¡å‹é…ç½®
        self.base_url = 'https://dashscope.aliyuncs.com/compatible-mode/v1'
        self.api_key = 'sk-'  # éœ€è¦æ›¿æ¢æˆè‡ªå·±çš„api_key
        self.model_name = 'qwen-plus'

        # æ•°æ®åº“é…ç½®
        self.host = 'localhost'
        self.user = 'root'
        self.password = 'root'
        self.database = 'travel_rag'

        # æ—¥å¿—é…ç½®
        self.log_file = 'logs/app.log'
```

### ç¯å¢ƒè¦æ±‚
1. **API å¯†é’¥**: éœ€è¦é…ç½®é˜¿é‡Œäº‘ DashScope API å¯†é’¥
2. **æ•°æ®åº“**: éœ€è¦ MySQL æ•°æ®åº“ï¼Œæ‰§è¡Œ `sql/create_table.sql` å’Œ `sql/insert_data.sql`
3. **Python**: 3.8+ ç‰ˆæœ¬

## å®‰è£…ä¸è¿è¡Œ

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd SmartVoyage

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®æ•°æ®åº“
mysql -u root -p < sql/create_table.sql
mysql -u root -p travel_rag < sql/insert_data.sql
```

### 2. é…ç½® API å¯†é’¥
ç¼–è¾‘ `config.py`ï¼Œè®¾ç½®æ‚¨çš„ DashScope API å¯†é’¥ï¼š
```python
self.api_key = 'sk-your-actual-api-key-here'
```

### 3. å¯åŠ¨ä»£ç†æœåŠ¡å™¨
```bash
# å¯åŠ¨å¤©æ°”æŸ¥è¯¢ä»£ç† (ç«¯å£ 5005)
python a2a_server/weather_server.py

# å¯åŠ¨ç¥¨åŠ¡æŸ¥è¯¢ä»£ç† (ç«¯å£ 5006)
python a2a_server/ticket_server.py

# å¯åŠ¨ç¥¨åŠ¡é¢„è®¢ä»£ç† (ç«¯å£ 5007)
python a2a_server/order_server.py
```

### 4. è¿è¡Œåº”ç”¨ç¨‹åº
#### Web ç•Œé¢
```bash
streamlit run app.py
```
è®¿é—®: http://localhost:8501

#### å‘½ä»¤è¡Œç•Œé¢
```bash
python main.py
```

## ä½¿ç”¨ç¤ºä¾‹

### Web ç•Œé¢ä½¿ç”¨
1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8501
2. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥é—®é¢˜ï¼Œä¾‹å¦‚ï¼š
   - "ä»Šå¤©åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"
   - "æŸ¥è¯¢ä¸€ä¸‹æ˜å¤©ä»åŒ—äº¬åˆ°ä¸Šæµ·çš„æœºç¥¨"
   - "æ¨èå‡ ä¸ªåŒ—äº¬çš„æ—…æ¸¸æ™¯ç‚¹"
3. ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«æ„å›¾å¹¶è°ƒç”¨ç›¸åº”ä»£ç†
4. å³ä¾§æ˜¾ç¤º Agent Cardï¼ŒæŸ¥çœ‹ä»£ç†çŠ¶æ€å’Œä¿¡æ¯

### å‘½ä»¤è¡Œç•Œé¢ä½¿ç”¨
```
ğŸ¤– åŸºäºA2Açš„SmartVoyageæ—…è¡Œæ™ºèƒ½åŠ©æ‰‹
æ¬¢è¿ä½“éªŒæ™ºèƒ½å¯¹è¯ï¼è¾“å…¥é—®é¢˜ï¼ŒæŒ‰å›è½¦æäº¤ï¼›è¾“å…¥'quit'é€€å‡ºï¼›è¾“å…¥'cards'æŸ¥çœ‹ä»£ç†å¡ç‰‡ã€‚

è¯·è¾“å…¥æ‚¨çš„é—®é¢˜: ä»Šå¤©åŒ—äº¬å¤©æ°”å¦‚ä½•ï¼Ÿ
æ­£åœ¨åˆ†ææ‚¨çš„æ„å›¾...
åŠ©æ‰‹å›å¤ï¼š
æ ¹æ®æœ€æ–°æ•°æ®ï¼ŒåŒ—äº¬2025-12-23çš„å¤©æ°”é¢„æŠ¥ä¸º...

è¯·è¾“å…¥æ‚¨çš„é—®é¢˜: cards
ğŸ› ï¸ Agent Cards:
--- Agent: WeatherQueryAssistant ---
æŠ€èƒ½: [å¤©æ°”æŸ¥è¯¢]
æè¿°: å¤©æ°”æŸ¥è¯¢åŠ©æ‰‹
åœ°å€: http://localhost:5005
çŠ¶æ€: åœ¨çº¿
...
```

## æç¤ºè¯ç³»ç»Ÿ

### æ„å›¾è¯†åˆ«æç¤ºè¯ (`main_prompts.py`)
- **åŠŸèƒ½**: è¯†åˆ«ç”¨æˆ·æ„å›¾å¹¶æ”¹å†™æŸ¥è¯¢
- **è¾“å‡ºæ ¼å¼**: JSON
- **æ”¯æŒæ„å›¾**: weather, flight, train, concert, order, attraction, out_of_scope

### ç»“æœæ€»ç»“æç¤ºè¯
- `summarize_weather_prompt()`: å¤©æ°”æŸ¥è¯¢ç»“æœæ€»ç»“
- `summarize_ticket_prompt()`: ç¥¨åŠ¡æŸ¥è¯¢ç»“æœæ€»ç»“
- `attraction_prompt()`: æ™¯ç‚¹æ¨èç”Ÿæˆ

## æ•°æ®åº“è®¾è®¡

### ä¸»è¦è¡¨ç»“æ„
- **å¤©æ°”æ•°æ®è¡¨**: å­˜å‚¨åŸå¸‚å¤©æ°”ä¿¡æ¯
- **ç¥¨åŠ¡æ•°æ®è¡¨**: å­˜å‚¨èˆªç­ã€ç«è½¦ã€æ¼”å”±ä¼šç¥¨åŠ¡ä¿¡æ¯
- **è®¢å•æ•°æ®è¡¨**: å­˜å‚¨ç”¨æˆ·é¢„è®¢ä¿¡æ¯
- **æ™¯ç‚¹æ•°æ®è¡¨**: å­˜å‚¨æ—…æ¸¸æ™¯ç‚¹ä¿¡æ¯

### åˆå§‹åŒ–è„šæœ¬
- `sql/create_table.sql`: åˆ›å»ºæ•°æ®åº“è¡¨
- `sql/insert_data.sql`: æ’å…¥åˆå§‹æ•°æ®

## æ—¥å¿—ç³»ç»Ÿ

### æ—¥å¿—é…ç½® (`create_logger.py`)
- **æ—¥å¿—çº§åˆ«**: DEBUG (æ–‡ä»¶), INFO (æ§åˆ¶å°)
- **æ—¥å¿—æ ¼å¼**: `æ¨¡å—å - æ—¶é—´ - çº§åˆ« - æ¶ˆæ¯`
- **æ—¥å¿—æ–‡ä»¶**: `logs/app.log`
- **ç‰¹æ€§**: é˜²æ­¢é‡å¤è¾“å‡ºï¼Œæ”¯æŒä¸­æ–‡å­—ç¬¦

## æ‰©å±•ä¸å®šåˆ¶

### æ·»åŠ æ–°ä»£ç†
1. åœ¨ `a2a_server/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ä»£ç†æœåŠ¡å™¨
2. åœ¨ `config.py` ä¸­æ·»åŠ ä»£ç†é…ç½®
3. åœ¨ `app.py` å’Œ `main.py` ä¸­æ³¨å†Œä»£ç†
4. åœ¨æ„å›¾è¯†åˆ«æç¤ºè¯ä¸­æ·»åŠ æ–°æ„å›¾

### ä¿®æ”¹æ¨¡å‹é…ç½®
- **å½“å‰æ¨¡å‹**: é˜¿é‡Œäº‘é€šä¹‰åƒé—® (qwen-plus)
- **å¯æ›¿æ¢**: æ”¯æŒä»»ä½• OpenAI å…¼å®¹çš„ API
- **é…ç½®ä½ç½®**: `config.py` ä¸­çš„ `base_url`, `api_key`, `model_name`

### è‡ªå®šä¹‰ç•Œé¢
- **Web ç•Œé¢**: ä¿®æ”¹ `app.py` ä¸­çš„ Streamlit ä»£ç å’Œ CSS
- **å‘½ä»¤è¡Œç•Œé¢**: ä¿®æ”¹ `main.py` ä¸­çš„äº¤äº’é€»è¾‘

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ä»£ç†æ— æ³•è¿æ¥**: ç¡®ä¿æ‰€æœ‰ä»£ç†æœåŠ¡å™¨å·²å¯åŠ¨
2. **API å¯†é’¥é”™è¯¯**: æ£€æŸ¥ `config.py` ä¸­çš„ API é…ç½®
3. **æ•°æ®åº“è¿æ¥å¤±è´¥**: æ£€æŸ¥ MySQL æœåŠ¡çŠ¶æ€å’Œè¿æ¥é…ç½®
4. **ä¾èµ–å®‰è£…å¤±è´¥**: ä½¿ç”¨ Python 3.8+ï¼Œç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/app.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep -i error logs/app.log
```

## é¡¹ç›®ä¿¡æ¯

### ç‰ˆæœ¬
- **å½“å‰ç‰ˆæœ¬**: v2.0
- **å¼€å‘å›¢é˜Ÿ**: é»‘é©¬ç¨‹åºå‘˜
- **æ¶æ„**: åŸºäº Agent2Agent çš„æ—…è¡ŒåŠ©æ‰‹ç³»ç»Ÿ

### è®¸å¯è¯
[å¾…æ·»åŠ ]

### è´¡çŒ®æŒ‡å—
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. åˆ›å»º Pull Request

## æœªæ¥è§„åˆ’

### è®¡åˆ’åŠŸèƒ½
1. **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒè‹±æ–‡ã€æ—¥æ–‡ç­‰å¤šè¯­è¨€ç•Œé¢
2. **è¯­éŸ³äº¤äº’**: é›†æˆè¯­éŸ³è¯†åˆ«å’Œåˆæˆ
3. **ç§»åŠ¨ç«¯åº”ç”¨**: å¼€å‘ iOS/Android å®¢æˆ·ç«¯
4. **ä¸ªæ€§åŒ–æ¨è**: åŸºäºç”¨æˆ·å†å²æä¾›ä¸ªæ€§åŒ–æ—…è¡Œå»ºè®®
5. **å®æ—¶é€šçŸ¥**: èˆªç­çŠ¶æ€ã€å¤©æ°”é¢„è­¦ç­‰å®æ—¶é€šçŸ¥

### æŠ€æœ¯ä¼˜åŒ–
1. **æ€§èƒ½ä¼˜åŒ–**: ä»£ç†è°ƒç”¨æ€§èƒ½ä¼˜åŒ–
2. **ç¼“å­˜æœºåˆ¶**: æ·»åŠ æŸ¥è¯¢ç»“æœç¼“å­˜
3. **ç›‘æ§ç³»ç»Ÿ**: ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ç›‘æ§
4. **è‡ªåŠ¨åŒ–æµ‹è¯•**: å®Œå–„æµ‹è¯•è¦†ç›–

---

**Powered by é»‘é©¬ç¨‹åºå‘˜ | åŸºäºAgent2Agentçš„æ—…è¡ŒåŠ©æ‰‹ç³»ç»Ÿ v2.0**
